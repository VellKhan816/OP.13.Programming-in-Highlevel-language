import sys
from PyQt6.QtWidgets import QApplication, QWidget, QVBoxLayout, QHBoxLayout, QLabel, QFrame
from PyQt6.QtCore import Qt
from PyQt6.QtGui import QPixmap

class ProductCard(QWidget):
    def __init__(self, data):
        super().__init__()
        self.setFixedHeight(280)
        self.data = data
        self.setup_ui()

    def setup_ui(self):
        main_layout = QHBoxLayout()
        main_layout.setContentsMargins(5, 5, 5, 5)
        main_layout.setSpacing(10)

        photo_frame = QFrame()
        photo_frame.setFrameShape(QFrame.Shape.Box)
        photo_frame.setLineWidth(2)
        photo_label = QLabel()
        photo_label.setAlignment(Qt.AlignmentFlag.AlignCenter)
        photo_label.setFixedSize(200, 200)

        pixmap = QPixmap(self.data["image"])
        if not pixmap.isNull():
            scaled = pixmap.scaled(180, 180, Qt.AspectRatioMode.KeepAspectRatio, Qt.TransformationMode.SmoothTransformation)
            photo_label.setPixmap(scaled)
        else:
            photo_label.setText("Фото\nне найдено")
            photo_label.setStyleSheet("""
                QLabel {
                    border: 2px solid black;
                    background-color: #f0f0f0;
                    font-weight: bold;
                    font-size: 14px;
                    text-align: center;
                    padding: 10px;
                }
            """)

        photo_layout = QVBoxLayout()
        photo_layout.addWidget(photo_label)
        photo_frame.setLayout(photo_layout)


        info_frame = QFrame()
        info_frame.setFrameShape(QFrame.Shape.Box)
        info_frame.setLineWidth(2)
        info_layout = QVBoxLayout()
        info_layout.setSpacing(3)
        info_layout.setContentsMargins(10, 10, 10, 10)

        title = QLabel(f"{self.data['category']} | {self.data['name']}")
        title.setStyleSheet("font-weight: bold; font-size: 16px;")
        info_layout.addWidget(title)

        desc = QLabel(f"Описание товара: {self.data['description']}")
        desc.setStyleSheet("font-weight: bold;")
        info_layout.addWidget(desc)

        manufacturer = QLabel(f"Производитель: {self.data['manufacturer']}")
        manufacturer.setStyleSheet("font-weight: bold;")
        info_layout.addWidget(manufacturer)

        supplier = QLabel(f"Поставщик: {self.data['supplier']}")
        supplier.setStyleSheet("font-weight: bold;")
        info_layout.addWidget(supplier)

        price = QLabel(f"Цена: {self.data['price']}")
        price.setStyleSheet("font-weight: bold;")
        info_layout.addWidget(price)

        unit = QLabel(f"Единица измерения: {self.data['unit']}")
        unit.setStyleSheet("font-weight: bold;")
        info_layout.addWidget(unit)

        stock = QLabel(f"Количество на складе: {self.data['stock']}")
        stock.setStyleSheet("font-weight: bold;")
        info_layout.addWidget(stock)

        info_frame.setLayout(info_layout)

        discount_frame = QFrame()
        discount_frame.setFrameShape(QFrame.Shape.Box)
        discount_frame.setLineWidth(2)
        discount_label = QLabel(f"Персональная\nскидка: {self.data['discount']}")
        discount_label.setAlignment(Qt.AlignmentFlag.AlignCenter)
        discount_label.setStyleSheet("""
            QLabel {
                border: 2px solid black;
                padding: 10px;
                font-weight: bold;
                font-size: 14px;
                text-align: center;
            }
        """)
        discount_label.setFixedSize(120, 200)

        discount_layout = QVBoxLayout()
        discount_layout.addWidget(discount_label)
        discount_frame.setLayout(discount_layout)

        main_layout.addWidget(photo_frame)
        main_layout.addWidget(info_frame)
        main_layout.addWidget(discount_frame)

        self.setLayout(main_layout)


class MainWindow(QWidget):
    def __init__(self):
        super().__init__()
        self.setWindowTitle("Две карточки товаров")
        self.resize(800, 600)

        layout = QVBoxLayout()
        layout.setContentsMargins(10, 10, 10, 10)
        layout.setSpacing(15)

        products = [
            {
                "image": "photo1.jpg",
                "category": "Электроника",
                "name": "Умные часы X1",
                "description": "Сердечный ритм, GPS, водонепроницаемость",
                "manufacturer": "TechCorp",
                "supplier": "ГлобалТрейд",
                "price": "9 990 ₽",
                "unit": "шт.",
                "stock": "15",
                "discount": "15%"
            },
            {
                "image": "photo2.jpg",
                "category": "Бытовая техника",
                "name": "Микроволновка M-200",
                "description": "6 программ, 25 л, стеклокерамика",
                "manufacturer": "HomeMaster",
                "supplier": "ТехноМаркет",
                "price": "4 499 ₽",
                "unit": "шт.",
                "stock": "8",
                "discount": "10%"
            }
        ]

        for product in products:
            card = ProductCard(product)
            layout.addWidget(card)

        self.setLayout(layout)


if __name__ == "__main__":
    app = QApplication(sys.argv)
    window = MainWindow()
    window.show()
    sys.exit(app.exec())
